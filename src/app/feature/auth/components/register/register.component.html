<section class="auth-sec">
  <div class="container">
    <div class="row">
      <div class="auth col-xs-12 col-lg-10 m-auto p-4 px-5">
        <img src="../../../assets/images/logo/logo-auth.svg" alt="" class="d-block m-auto">
        <h2>Register</h2>
        <p class="grey-color">Welcome Back! Please enter your details</p>
        <form [formGroup]="registerForm" (ngSubmit)="register()">
          <div class="row">
            <div class="col-md-6 m-auto mb-2">
              <div class="upload d-flex justify-content-center">
                <ngx-dropzone class="rounded-circle text-center overflow-hidden" (change)="onSelect($event)">
                  <ngx-dropzone-label>upload Photo <i class="fa-solid fa-cloud-arrow-up"></i></ngx-dropzone-label>
                  <ngx-dropzone-image-preview class="rounded-circle" ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f" [removable]="true" (removed)="onRemove(f)">
                    <ngx-dropzone-label class="rounded-circle"></ngx-dropzone-label>
                  </ngx-dropzone-image-preview>
                </ngx-dropzone>
              </div>
            </div>
          </div>
          <div class="row">
            <!-- userName -->
            <div class="col-md-5">
              <div class="input-group">
                <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-user grey-color"></i></span>
                <input type="text" class="form-control" placeholder="UserName" formControlName="userName" aria-label="userName">
              </div>
              <ng-container *ngIf="registerForm.get('userName')?.dirty || registerForm.get('userName')?.touched">
                <p class="text-danger" *ngIf="registerForm.get('userName')?.errors?.['required']">The UserName is required</p>
                <p class="text-danger" *ngIf="registerForm.get('userName')?.errors?.['pattern']">The UserName must contain characters and end with numbers without spaces.</p>
              </ng-container>
            </div>
            <!-- email -->
            <div class="col-md-5 offset-md-2">
              <div class="input-group flex-nowrap position-relative">
                <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-envelope grey-color"></i></span>
                <input type="email" class="form-control" placeholder="Enter your E-mail" formControlName="email" aria-label="email">
              </div>
              <ng-container *ngIf="registerForm.get('email')?.dirty || registerForm.get('email')?.touched">
                <p class="text-danger" *ngIf="registerForm.get('email')?.errors?.['required']">email is required</p>
                <p class="text-danger" *ngIf="registerForm.get('email')?.errors?.['email']">
                  Email is not valid
                </p>
              </ng-container>
            </div>
            <!-- country -->
            <div class="col-md-5">
              <div class="input-group flex-nowrap position-relative">
                <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-earth-americas grey-color"></i></span>
                <input type="text" class="form-control" placeholder="Country" formControlName="country" aria-label="country">
              </div>
              <ng-container *ngIf="registerForm.get('country')?.dirty || registerForm.get('country')?.touched">
                <p class="text-danger" *ngIf="registerForm.get('country')?.errors?.['required']">country is required</p>
              </ng-container>
            </div>
            <!-- phoneNumber -->
            <div class="col-md-5 offset-md-2">
              <div class="input-group flex-nowrap position-relative">
                <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-phone grey-color"></i></span>
                <input type="text" class="form-control" placeholder="phoneNumber" formControlName="phoneNumber" aria-label="phoneNumber">
              </div>
              <ng-container *ngIf="registerForm.get('phoneNumber')?.dirty || registerForm.get('phoneNumber')?.touched">
                <p class="text-danger" *ngIf="registerForm.get('phoneNumber')?.errors?.['required']">phoneNumber is required</p>
              </ng-container>
            </div>
            <!-- password -->
            <div class="col-md-5">
              <div class="input-group flex-nowrap position-relative">
                <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-lock grey-color"></i></span>
                <input autocomplete="--" [type]="showPassword? 'text' : 'password'" class="form-control" placeholder="Password" formControlName="password">
                <span class="eye-pass" (click)="toggleShowPass()">
                  <i
                  class="fa-solid position-absolute grey-color"
                  [class]="!showPassword ? 'fa-eye' : 'fa-eye-slash'"
                  >
                  </i>
                </span>
              </div>
              <ng-container *ngIf="registerForm.get('password')?.dirty || registerForm.get('password')?.touched">
                <p class="text-danger" *ngIf="registerForm.get('password')?.errors?.['required']">password is required</p>
                <p class="text-danger" *ngIf="registerForm.get('password')?.errors?.['pattern']">
                  least 8 characters, one
                  special character, one lowercase letter, one uppercase letter and one digit.
                </p>
              </ng-container>
            </div>
            <!-- confirmPassword -->
            <div class="col-md-5 offset-md-2">
              <div class="input-group flex-nowrap position-relative">
                <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-lock grey-color"></i></span>
                <input autocomplete="--" [type]="showConfirmPassword? 'text' : 'password'" class="form-control" placeholder="confirmPassword" formControlName="confirmPassword">
                <span class="eye-pass" (click)="toggleShowConfirmPass()">
                  <i
                  class="fa-solid position-absolute grey-color"
                  [class]="!showConfirmPassword ? 'fa-eye' : 'fa-eye-slash'"
                  >
                  </i>
                </span>
              </div>
              <ng-container *ngIf="registerForm.get('confirmPassword')?.dirty || registerForm.get('confirmPassword')?.touched">
                <p class="text-danger" *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">confirmPassword is required</p>
                <p class="text-danger" *ngIf="registerForm.getError('mismatch')">
                  not match with password
                </p>
              </ng-container>
            </div>
          </div>
          <div class="d-flex justify-content-end w-100 my-3">
            <a class="main-color text-decoration-none" routerLink="/auth/login">Login Now?</a>
          </div>
          <button class="bg-main-color w-100" type="submit">Register</button>
        </form>
      </div>
    </div>
  </div>
</section>

<app-spinner *ngIf="isLoading"></app-spinner>
